# Copilot Instructions

- **Project goal**: Rebuild legacy Nuxt app (`old-ibeno/nuxt-frontend`) into new Nuxt 3 UI (`frontend`) backed by a new NestJS API (`api`) that matches parity described in `PRD.md` and route map in `api/ENDPOINTS.md`.
- **Repo layout**: `api/` (Nest skeleton), `frontend/` (Nuxt UI starter), `old-ibeno/nuxt-frontend/` (legacy reference only; do not modify unless migrating artifacts).
- **API (Nest, bun)**: install `bun install`; dev `bun run start:dev`; build `bun run build`; unit `bun run test`; e2e `bun run test:e2e`; lint `bun run lint`. Server listens on `PORT` (default `3000`); avoid clashing with Nuxt dev by choosing a different port. Current code is the Nest starter (`AppModule`, `AppController`, `AppService`), so new modules/controllers/services should mirror `api/ENDPOINTS.md` under the `/api` prefix. Use DTO validation, guards, and Prisma/Postgres as implied by `PRD.md` even though not scaffolded yet.
- **API coding patterns**: Organize per domain (auth, users, departments, jobs, applications/students, sessions, assets, accounts, contracts, program support, supports, leave). Add storage/email abstractions for uploads and notifications; replace-or-delete uploaded files on updates per `PRD.md`. Guard auth-sensitive routes with role-based access; add health check `/health`.
- **Frontend (Nuxt 4, bun)**: install `bun install`; dev `bun run dev`; build `bun run build`; preview `bun run preview`; lint `bun run lint`; typecheck `bun run typecheck`. Uses `@nuxt/ui` with global theme colors in `app/assets/css/main.css` and `app/app.config.ts`; root layout is `app/app.vue` with `UApp`, `UHeader`, `UMain`, `UFooter`, `UColorModeButton`, and `TemplateMenu`. Page content currently lives in `app/pages/index.vue` as Nuxt UI marketing sectionsâ€”replace with IBENO screens.
- **Frontend config**: `nuxt.config.ts` enables `@nuxt/eslint` + `@nuxt/ui`, prerenders `/`, and sets `compatibilityDate: '2025-01-15'`. CSS entry is `~/assets/css/main.css`; primary palette is green (see static CSS variables).
- **Data flow expectations**: Nuxt frontend should call the Nest API at `/api/*` matching `api/ENDPOINTS.md`. Implement client stores/composables to mirror domains above; ensure auth-aware flows and file upload handling align with backend abstractions.
- **Testing & quality**: Use Jest (configured in `api/package.json`) for backend; no frontend tests yet. ESLint is configured for both projects; run the project-specific lint/typecheck commands before PRs. Prefer TypeScript everywhere; keep imports and formatting consistent with ESLint configs.
- **Operational notes**: `.env` driven setup is implied but not committed; wire secrets (database, mail, storage) explicitly. Keep containerization in mind; PRD targets Postgres + Prisma 7. Document any new scripts in the respective `README.md` files.
- **When migrating from legacy**: Reference layouts/assets/interfaces in `old-ibeno/nuxt-frontend` but port them into `frontend/` using Nuxt UI patterns and Pinia (planned); keep API paths identical to the legacy map unless PRD calls for improved REST semantics.
